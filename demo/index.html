<!DOCTYPE html><html><head><title>2D Collision Detection</title><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300"><link rel="icon" type="image/png" href="./favicon.png"><style type="text/css">body,html{font:16px Roboto;height:100%;margin:0;width:100%}.panel{position:fixed;text-align:center;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.panel__button{background-color:#eee;border-radius:.25rem;border:none;font:inherit;margin:2rem 1rem;outline:none;padding:.5rem}.panel__button:active{background-color:#ccc}.canvas__backdrop{background-color:#333}.panel__input-container{display:inline-block;margin:2rem 1rem}.panel__checkbox-label--readable{color:#fff}input[type=checkbox]{display:none}input[type=checkbox]+label:before{background-color:#eee;border-radius:.1rem;border:1px solid #eee;content:"\A0";display:inline-block;height:1rem;margin-right:.5rem;padding:0;vertical-align:top;width:1rem}input[type=checkbox]:checked+label:before{background-color:#eee;color:#333;content:"\2714";text-align:center}.panel__text-input{background-color:#eee;border-radius:.1rem;border:1px solid #eee;font:1rem Roboto;margin-left:.5rem;outline:none;padding:.25rem}#custom-collision-color{width:7rem}</style></head><body><canvas id="canvas"></canvas><div class="panel"><button class="panel__button panel__add-element">Add Element</button> <button class="panel__button panel__remove-element">Remove Element</button><div class="panel__input-container"><input id="toggle-backdrop" type="checkbox" class="panel__checkbox"><label for="toggle-backdrop" class="panel__checkbox-label">Toggle Backdrop</label></div><div class="panel__input-container"><input id="toggle-bounding-boxes" type="checkbox" class="panel__checkbox" checked="checked"><label for="toggle-bounding-boxes" class="panel__checkbox-label">Toggle Bounding Boxes</label></div><div class="panel__input-container"><label for="custom-collision-color" class="panel__text-input-label">Custom Collision Color</label><input id="custom-collision-color" type="text" class="panel__text-input" placeholder="Enter hex code"></div></div><script type="text/javascript">!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n(1);var o=n(5),r=i(o);!function(e,t,n){var i=new r.default(e,t,n);i.run()}(window,document,"canvas")},function(e,t){},,,,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(6),s=i(a),u=n(16),c=i(u),l=n(17),f=i(l),h=n(11),_=function(){function e(t,n,i){o(this,e),this._initializeEngine(t,n,i),this._initializeRouter(),this._initializePanel(n),this._addResizeListener(t)}return r(e,[{key:"_initializeEngine",value:function(e,t,n){this._engine=new s.default(e,t,n)}},{key:"_initializeRouter",value:function(){this._router=new f.default(this._engine)}},{key:"_initializePanel",value:function(e){this._panel=new c.default(e,this._router)}},{key:"_addResizeListener",value:function(e){var t=this;e.addEventListener("resize",(0,h.debounce)(function(){t._engine.resizeView()},250))}},{key:"run",value:function(){this._engine.run()}}]),e}();t.default=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(7),s=i(a),u=n(14),c=i(u),l=function(){function e(t,n,i){o(this,e),this._assignContexts(t,n),this._initializeView(i),this._constructElements()}return r(e,[{key:"_assignContexts",value:function(e,t){this._w=e,this._d=t}},{key:"_initializeView",value:function(e){this._view=new c.default(this._w,this._d,e)}},{key:"_constructElements",value:function(){this._elements=[];for(var e=0;e<this.constructor.elementsCount;e++)this.createElement()}},{key:"run",value:function(){this._loop()}},{key:"_loop",value:function(){var e=this;this._w.requestAnimationFrame(function(){e._tick(),e._loop()})}},{key:"_tick",value:function(){var e=this;this._view.clear(),this._checkForCollisions(),this._elements.forEach(function(t,n,i){e._view.render(t),t.move(),e._handlePossibleSuccession(t,n,i)}),this._view.replaceCanvasContext()}},{key:"_checkForCollisions",value:function(){var e=this,t=this._elements,n=function(t){return!e._view.hasLost(t)},i={};t.forEach(function(e,t){var o=e.clones.filter(n).concat(e);i[t]=o,s.default.unflag(o)});for(var o=0;o<t.length-1;o++)for(var r=i[o],a=o+1;a<t.length;a++){var u=i[a];this._collisionBetween(r,u)&&(t[o].inContact||s.default.flag(r),s.default.flag(u))}}},{key:"_collisionBetween",value:function(e,t){var n=this;return e.some(function(e){if(!n._view.hasLost(e))return t.some(function(t){if(!n._view.hasLost(t))return s.default.areTouching(e,t)})})}},{key:"_handlePossibleSuccession",value:function(e,t,n){var i=this;if(e.clones&&e.clones.length>0){var o=function(e){return i._view.hasOverlapping(e)},r=e.clones.find(o);r&&(n[t]=r,s.default.makeTranslatedClones(r,this._view))}}},{key:"resizeView",value:function(){this._view.resizeCanvas(this._w,this._d),this._recalibrateElements()}},{key:"_recalibrateElements",value:function(){var e=this;this._elements.forEach(function(t){s.default.makeTranslatedClones(t,e._view)})}},{key:"createElement",value:function(){var e=s.default.makeRandom(this._view);this._elements.push(e)}},{key:"destroyElement",value:function(){this._elements=this._elements.splice(1)}},{key:"toggleCanvasBackground",value:function(e){this._view.toggleCanvasBackground(e),this._changeLabelColor(e)}},{key:"_changeLabelColor",value:function(e){this._d.querySelectorAll("label").forEach(function(t){var n=t.classList,i="panel__checkbox-label--readable";e?n.add(i):n.remove(i)})}},{key:"toggleRenderingBounds",value:function(e){this._view.toggleRenderingBounds(e)}},{key:"applyCustomGlowSettings",value:function(e){this._view.applyCustomGlowSettings(e)}}],[{key:"elementsCount",get:function(){return 5}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(8),c=i(u),l=n(12),f=i(l),h=n(13),_=i(h),v=n(11),d=function(){function e(t,n){r(this,e),this._vertices=t,this._center=new _.default,this._bounds={},this._edges=[],this._clones=[],this._vertices&&this._vertices.length>2&&this._initializeComponents(),this._setup(n)}return s(e,[{key:"_initializeComponents",value:function(){var e=this;this._vertices.forEach(function(t,n,i){e._computeCenterFrom(t,i),e._computeBoundsFrom(t);var o=(n+1)%i.length;e._buildEdgeFrom(t,i[o])})}},{key:"_computeCenterFrom",value:function(e,t){this._center.add(e);var n=t.length-1;e===t[n]&&this._center.divide(t.length)}},{key:"_computeBoundsFrom",value:function(e){(0,v.isEmpty)(this._bounds)?this._initializeBounds(e):(this._bounds.min.min(e),this._bounds.max.max(e))}},{key:"_initializeBounds",value:function(e){this._bounds.min=new _.default(e.x,e.y),this._bounds.max=new _.default(e.x,e.y)}},{key:"_buildEdgeFrom",value:function(e,t){this._edges.push(new f.default(e,t))}},{key:"_setup",value:function(e){if(e){var t=e.inContact,n=o(e,["inContact"]);this._config=n,this.inContact=t||!1}}},{key:"move",value:function(){this.moveComponents(),this._clones.length>0&&this._clones.forEach(function(e){e.moveComponents()})}},{key:"moveComponents",value:function(){var e=this;this._config&&this._config.movementSettings&&!function(){var t=e._config.movementSettings,n=t.velocity,i=t.angle,o=e._config.movementSettings.pivot||e._center,r=[n,i,o];e._clearBounds(),e._center.move.apply(e._center,r),e._edges.forEach(function(t){t.move(r),e._computeBoundsFrom(t.firstPoint)})}()}},{key:"_clearBounds",value:function(){this._bounds={}}},{key:"clearClones",value:function(){this._clones=[]}},{key:"clone",value:function e(t){var n=this._cloneVertices(t),e=new this.constructor(n,this._config);return this._clones.push(e),e}},{key:"_cloneVertices",value:function(e){return this._vertices.map(function(t){var n=t.x,i=t.y,o=new _.default(n,i);return e&&o.add(e),o})}},{key:"intersects",value:function(e){return this._edges.some(function(t){return e.edges.some(function(e){return f.default.intersects(t,e)})})}},{key:"inside",value:function(e){return this._vertices.some(function(t){return t.inside(e)})}},{key:"flag",value:function(){this.inContact=!0}},{key:"unflag",value:function(){this.inContact=!1}},{key:"vertices",get:function(){return this._vertices}},{key:"bounds",get:function(){return this._bounds}},{key:"edges",get:function(){return this._edges}},{key:"clones",get:function(){return this._clones}},{key:"canvasSettings",get:function(){return this._config.canvasSettings}},{key:"movementSettings",get:function(){return this._config?this._config.movementSettings:this.constructor.defaultMovementSettings}}],[{key:"makeRandom",value:function(e){var t=this._generateVertices(e),n=Object.assign(this.paintSettings,this.colorSettings()),i=this.randomMovementSettings,o=new this(t,{canvasSettings:n,movementSettings:i});return e&&this.makeTranslatedClones(o,e),o}},{key:"_generateVertices",value:function(e){for(var t=[],n=e?e.generateRandomLocation():new _.default,i=(0,v.random)(75,100),o=(0,v.random)(3,12),r=2*Math.PI/o,a=0;a<o;a++){var s=r*(a+1),u=1.5-Math.random(),c=u*i*Math.cos(s)+n.x,l=u*i*Math.sin(s)+n.y;t.push(new _.default(c,l))}return t}},{key:"colorSettings",value:function(e){var t=e||c.default.generateRandom();return{fillStyle:t,strokeStyle:t}}},{key:"makeTranslatedClones",value:function(e,t){var n=this;this._clearClones(e);var i=t.bounds.max,o=this._computeCloneVectors(e,i);o&&o.forEach(function(t){n._replicate(e,t)})}},{key:"_clearClones",value:function(e){e.clones&&e.clones.length>0&&e.clearClones()}},{key:"_computeCloneVectors",value:function(e,t){if(e.movementSettings){var n=function(){var e=[],n=[-1,0,1];return n.forEach(function(i){n.forEach(function(n){if(0!==i||0!==n){var o=new _.default(t.x*i,t.y*n);e.push(o)}})}),{v:e}}();if("object"===("undefined"==typeof n?"undefined":a(n)))return n.v}}},{key:"_replicate",value:function(e,t){t&&e.clone(t)}},{key:"areTouching",value:function(e,t){return e.intersects(t)||e.inside(t)||t.inside(e)}},{key:"flag",value:function(e){e.forEach(function(e){e.flag()})}},{key:"unflag",value:function(e){e.forEach(function(e){e.unflag()})}},{key:"paintSettings",get:function(){return{_fillAlpha:.5,_strokeAlpha:1,lineWidth:1}}},{key:"boundsCanvasSettings",get:function(){return{strokeStyle:"#666",lineWidth:.5}}},{key:"glowCanvasSettings",get:function(){var e="#e80058";return Object.assign(this.paintSettings,this.colorSettings(e))}},{key:"randomMovementSettings",get:function(){var e=function(){return(0,v.random)([-1,1])},t=function(){return e()*Math.random()},n=Math.PI/128,i=4;return{velocity:new _.default(t()*i,t()*i),angle:t()*n}}},{key:"defaultMovementSettings",get:function(){return{velocity:new _.default,angle:0}}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),r=i(o),a=n(11),s={generateRandom:function(){var e=(new r.default).from_hue((0,a.random)(359)).scheme("monochromatic").variation("hard").web_safe(!1),t=e.colors(),n=3;return"#"+t[n]}};t.default=s},function(e,t,n){var i,o;(function(e){(function(){var n,r={}.hasOwnProperty;n=function(){function e(){var t,n;for(t=[],n=1;n<=4;n++)t.push(new e.mutablecolor(60));this.col=t,this._scheme="mono",this._distance=.5,this._web_safe=!1,this._add_complement=!1}var t,n,i,o,a,s;for(n=function(e){return e.split(/\s+/)},e.SCHEMES={},s="mono monochromatic contrast triade tetrade analogic".split(/\s+/),o=0,a=s.length;o<a;o++)i=s[o],e.SCHEMES[i]=!0;return e.PRESETS={default:[-1,-1,1,-.7,.25,1,.5,1],pastel:[.5,-.9,.5,.5,.1,.9,.75,.75],soft:[.3,-.8,.3,.5,.1,.9,.5,.75],light:[.25,1,.5,.75,.1,1,.5,1],hard:[1,-1,1,-.6,.1,1,.6,1],pale:[.1,-.85,.1,.5,.1,1,.1,.75]},e.COLOR_WHEEL={0:[255,0,0,100],15:[255,51,0,100],30:[255,102,0,100],45:[255,128,0,100],60:[255,153,0,100],75:[255,178,0,100],90:[255,204,0,100],105:[255,229,0,100],120:[255,255,0,100],135:[204,255,0,100],150:[153,255,0,100],165:[51,255,0,100],180:[0,204,0,80],195:[0,178,102,70],210:[0,153,153,60],225:[0,102,178,70],240:[0,51,204,80],255:[25,25,178,70],270:[51,0,153,60],285:[64,0,153,60],300:[102,0,153,60],315:[153,0,153,60],330:[204,0,153,80],345:[229,0,102,90]},e.prototype.colors=function(){var e,t,n,i,o,r,a,s,u,c=this;if(r=1,t=this.col[0].get_hue(),e={mono:function(){},contrast:function(){return r=2,c.col[1].set_hue(t),c.col[1].rotate(180)},triade:function(){var e;return r=3,e=60*c._distance,c.col[1].set_hue(t),c.col[1].rotate(180-e),c.col[2].set_hue(t),c.col[2].rotate(180+e)},tetrade:function(){var e;return r=4,e=90*c._distance,c.col[1].set_hue(t),c.col[1].rotate(180),c.col[2].set_hue(t),c.col[2].rotate(180+e),c.col[3].set_hue(t),c.col[3].rotate(e)},analogic:function(){var e;return r=c._add_complement?4:3,e=60*c._distance,c.col[1].set_hue(t),c.col[1].rotate(e),c.col[2].set_hue(t),c.col[2].rotate(360-e),c.col[3].set_hue(t),c.col[3].rotate(180)}},e.monochromatic=e.mono,null==e[this._scheme])throw"Unknown color scheme name: "+this._scheme;for(e[this._scheme](),o=[],n=a=0,u=r-1;0<=u?a<=u:a>=u;n=0<=u?++a:--a)for(i=s=0;s<=3;i=++s)o[4*n+i]=this.col[n].get_hex(this._web_safe,i);return o},e.prototype.colorset=function(){var e,n;for(e=t(this.colors()),n=[];e.length>0;)n.push(e.splice(0,4));return n},e.prototype.from_hue=function(e){if(null==e)throw"variation needs an argument";return this.col[0].set_hue(e),this},e.prototype.from_hex=function(t){var n,i,o,a,s,u,c,l,f,h,_,v,d,y,m,g,p,b,k,w,x;if(null==t)throw"from_hex needs an argument";if(!/^([0-9A-F]{2}){3}$/im.test(t))throw"from_hex("+t+") - argument must be in the form of RRGGBB";p=/(..)(..)(..)/.exec(t).slice(1,4),x=function(){var e,t,n;for(n=[],e=0,t=p.length;e<t;e++)y=p[e],n.push(parseInt(y,16));return n}(),m=x[0],o=x[1],n=x[2],g=function(e,t,n){var i,o,r,a,s,u;return a=Math.min.apply(Math,[e,t,n]),r=Math.max.apply(Math,[e,t,n]),i=r-a,u=r,i>0?(s=i/r,o=e===r?(t-n)/i:t===r?2+(n-e)/i:4+(e-t)/i,o*=60,o%=360,[o,s,u]):[0,0,u]},l=g(function(){var e,t,i,r;for(i=[m,o,n],r=[],e=0,t=i.length;e<t;e++)h=i[e],r.push(h/255);return r}()),s=l[0],u=0,c=1e3,_=null,v=null,a=null,b=null,k=null,w=[];for(h in COLOR_WHEEL)r.call(COLOR_WHEEL,h)&&w.push(h);for(h in w.sort(function(e,t){return e-t}))i=e.COLOR_WHEEL[h],f=g(function(){var e,t,n,o;for(n=i.slice(0,3),o=[],e=0,t=n.length;e<t;e++)h=n[e],o.push(h/255);return o}()),a=f[0],a>=u&&a<=s&&(u=a,_=h),a<=c&&a>=s&&(c=a,v=h);return(0===c||c>360)&&(c=360,v=360),d=c!==u?(s-u)/(c-u):0,a=Math.round(_+d*(v-_)),a%=360,b=l[1],k=l[2],this.from_hue(a),this._set_variant_preset([b,k,b,.7*k,.25*b,1,.5*b,1]),this},e.prototype.add_complement=function(e){if(null==e)throw"add_complement needs an argument";return this._add_complement=e,this},e.prototype.web_safe=function(e){if(null==e)throw"web_safe needs an argument";return this._web_safe=e,this},e.prototype.distance=function(e){if(null==e)throw"distance needs an argument";if(e<0)throw"distance("+e+") - argument must be >= 0";if(e>1)throw"distance("+e+") - argument must be <= 1";return this._distance=e,this},e.prototype.scheme=function(t){if(null==t)throw"scheme needs an argument";if(null==e.SCHEMES[t])throw"'"+t+"' isn't a valid scheme name";return this._scheme=t,this},e.prototype.variation=function(t){if(null==t)throw"variation needs an argument";if(null==e.PRESETS[t])throw"'$v' isn't a valid variation name";return this._set_variant_preset(e.PRESETS[t]),this},e.prototype._set_variant_preset=function(e){var t,n,i;for(i=[],t=n=0;n<=3;t=++n)i.push(this.col[t].set_variant_preset(e));return i},t=function(e){var n,i,o;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return n="",null!=e.global&&(n+="g"),null!=e.ignoreCase&&(n+="i"),null!=e.multiline&&(n+="m"),null!=e.sticky&&(n+="y"),new RegExp(e.source,n);o=new e.constructor;for(i in e)o[i]=t(e[i]);return o},e.mutablecolor=function(){function t(t){if(null==t)throw"No hue specified";this.saturation=[],this.value=[],this.base_red=0,this.base_green=0,this.base_blue=0,this.base_saturation=0,this.base_value=0,this.set_hue(t),this.set_variant_preset(e.PRESETS.default)}return t.prototype.hue=0,t.prototype.saturation=[],t.prototype.value=[],t.prototype.base_red=0,t.prototype.base_green=0,t.prototype.base_saturation=0,t.prototype.base_value=0,t.prototype.get_hue=function(){return this.hue},t.prototype.set_hue=function(t){var n,i,o,r,a,s,u,c,l,f;n=function(e,t,n){return e+Math.round((t-e)*n)},this.hue=Math.round(t%360),a=this.hue%15+(this.hue-Math.floor(this.hue)),f=a/15,s=this.hue-Math.floor(a),u=(s+15)%360,o=e.COLOR_WHEEL[s],r=e.COLOR_WHEEL[u],c={red:0,green:1,blue:2,value:3};for(i in c)l=c[i],this["base_"+i]=n(o[l],r[l],f);return this.base_saturation=n(100,100,f)/100,this.base_value/=100},t.prototype.rotate=function(e){var t;return t=(this.hue+e)%360,this.set_hue(t)},t.prototype.get_saturation=function(e){var t,n;return n=this.saturation[e],t=n<0?-n*this.base_saturation:n,t>1&&(t=1),t<0&&(t=0),t},t.prototype.get_value=function(e){var t,n;return n=this.value[e],t=n<0?-n*this.base_value:n,t>1&&(t=1),t<0&&(t=0),t},t.prototype.set_variant=function(e,t,n){return this.saturation[e]=t,this.value[e]=n},t.prototype.set_variant_preset=function(e){var t,n,i;for(i=[],t=n=0;n<=3;t=++n)i.push(this.set_variant(t,e[2*t],e[2*t+1]));return i},t.prototype.get_hex=function(e,t){var n,i,o,r,a,s,u,c,l,f,h,_,v,d,y,m,g;for(s=Math.max.apply(Math,function(){var e,t,n,o;for(n=["red","green","blue"],o=[],e=0,t=n.length;e<t;e++)i=n[e],o.push(this["base_"+i]);return o}.call(this)),u=Math.min.apply(Math,function(){var e,t,n,o;for(n=["red","green","blue"],o=[],e=0,t=n.length;e<t;e++)i=n[e],o.push(this["base_"+i]);return o}.call(this)),_=255*(t<0?this.base_value:this.get_value(t)),f=t<0?this.base_saturation:this.get_saturation(t),a=s>0?_/s:0,c=[],g=["red","green","blue"],v=0,y=g.length;v<y;v++)i=g[v],l=Math.min.apply(Math,[255,Math.round(_-(_-this["base_"+i]*a)*f)]),c.push(l);for(e&&(c=function(){var e,t,i;for(i=[],e=0,t=c.length;e<t;e++)n=c[e],i.push(51*Math.round(n/51));return i}()),o="",d=0,m=c.length;d<m;d++)r=c[d],h=r.toString(16),h.length<2&&(h="0"+h),o+=h;return o},t}(),e}(),"undefined"!=typeof e&&null!==e&&null!=e.exports?e.exports=n:(i=[],o=function(){return n}.apply(t,i),!(void 0!==o&&(e.exports=o)))}).call(this)}).call(t,n(10)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";function n(e,t,n){var i=arguments,o=this;if(a(e)){var r=void 0;return function(){var a=i,s=function(){r=null,n||e.apply(o,a)},u=n&&!r;u?e.apply(o,a):(clearTimeout(r),r=setTimeout(s,t))}}}function i(e,t,n){if(c(e)&&c(t)&&c(n)&&n>t)return e>=t&&e<=n}function o(e){return e instanceof Array}function r(e){if(l(e)){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}return o(e)?0===e.length:null}function a(e){return"function"==typeof e}function s(e){if(u(e)){var t=/^#(?:[0-9a-fA-F]{3}){1,2}$/i;return t.test(e)}}function u(e){return"string"==typeof e}function c(e){return!isNaN(parseFloat(e))&&isFinite(e)}function l(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":h(e))}function f(e,t){return o(e)?e[Math.floor(Math.random()*e.length)]:(Number.isInteger(t)||(t=e||1,e=0),e+Math.floor(Math.random()*(t-e+1)))}Object.defineProperty(t,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.debounce=n,t.inRange=i,t.isArray=o,t.isEmpty=r,t.isFunction=a,t.isHexColor=s,t.isNumber=c,t.isObject=l,t.random=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(11),a=function(){function e(t,n){i(this,e),Object.assign(this,{firstPoint:t,secondPoint:n})}return o(e,[{key:"move",value:function(e){this.firstPoint.move.apply(this.firstPoint,e)}}],[{key:"intersects",value:function(e,t){var n=this._computeSegment(e),i=this._computeSegment(t),o=this._computeSegment(e,t),a=this._computeDivisor(n,i),s=this._computeDeterminant(n,o,a),u=this._computeDeterminant(i,o,a);return(0,r.inRange)(s,0,1)&&(0,r.inRange)(u,0,1)}},{key:"_computeSegment",value:function(e,t){return t?{x:e.firstPoint.x-t.firstPoint.x,y:e.firstPoint.y-t.firstPoint.y}:{x:e.secondPoint.x-e.firstPoint.x,y:e.secondPoint.y-e.firstPoint.y}}},{key:"_computeDivisor",value:function(e,t){return e.x*t.y-t.x*e.y}},{key:"_computeDeterminant",value:function(e,t,n){return(e.x*t.y-e.y*t.x)/n}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(11),a=function(){function e(t,n){i(this,e),this._set(t,n)}return o(e,[{key:"_set",value:function(e,t){return this.x=e||0,this.y=t||0,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"divide",value:function(e){return 0!==e&&(this.x/=e,this.y/=e),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"move",value:function(e,t,n){this._translate(e),t&&(0,r.isNumber)(t)&&n&&this._rotate(t,n)}},{key:"_translate",value:function(e){this.add(e)}},{key:"_rotate",value:function(e,t){var n=Math.sin(e),i=Math.cos(e),o=this.x-t.x,r=this.y-t.y;this.x=i*o-n*r+t.x,this.y=n*o+i*r+t.y}},{key:"inside",value:function e(t){for(var n=t.vertices,e=!1,i=0,o=n.length-1;i<n.length;o=i++){var r=this._insideCondition(n[i],n[o]);r&&(e=!e)}return e}},{key:"_insideCondition",value:function(e,t){return e.y>this.y!=t.y>this.y&&this.x<(t.x-e.x)*(this.y-e.y)/(t.y-e.y)+e.x}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(15),s=i(a),u=n(7),c=i(u),l=n(13),f=i(l),h=n(11),_=function(){function e(t,n,i){o(this,e),this._initializeCanvases(t,n,i),this._initializePen()}return r(e,[{key:"_initializeCanvases",value:function(e,t,n){this._createCanvas(t,n),this._sizeCanvas(e),this._createOffscreenCanvas(t)}},{key:"_createCanvas",value:function(e,t){this._canvas=e.getElementById(t),this._context=this._canvas.getContext("2d")}},{key:"_sizeCanvas",value:function(e){this._setCanvasSize(e),this._setBounds()}},{key:"resizeCanvas",value:function(e,t){this._sizeCanvas(e),this._createOffscreenCanvas(t),this._pen.switchContext(this._offscreenContext)}},{key:"_setCanvasSize",value:function(e){this._canvas.width=e.innerWidth,this._canvas.height=e.innerHeight}},{key:"_setBounds",value:function(){this._bounds={min:new f.default,max:new f.default(this._canvas.width,this._canvas.height)}}},{key:"_createOffscreenCanvas",value:function(e){var t=this._canvas,n=t.width,i=t.height,o=t.id,r=e.createElement("canvas");r.width=n,r.height=i,r.id=o,this._offscreenCanvas=r,this._offscreenContext=this._offscreenCanvas.getContext("2d")}},{key:"_initializePen",value:function(){this._pen=new s.default(this._offscreenContext)}},{key:"clear",value:function(){this._context.clearRect(0,0,this.width,this.height),this._offscreenContext.clearRect(0,0,this.width,this.height)}},{key:"replaceCanvasContext",value:function(){this._context.drawImage(this._offscreenCanvas,0,0)}},{key:"render",value:function(e){var t=this,n={ignoreBounds:this._ignoreBounds,customGlowSettings:this._customGlowSettings};this._pen.draw(e,n),e.clones.length>0&&e.clones.forEach(function(e){t._pen.draw(e,n)})}},{key:"hasLost",value:function(e){var t=e.bounds,n=t.min,i=t.max,o=this._bounds,r=o.min,a=o.max;return i.x<=r.x||i.y<=r.y||n.x>=a.x||n.y>=a.y}},{key:"contains",value:function(e){var t=e.bounds,n=t.min,i=t.max,o=this._bounds,r=o.min,a=o.max;return n.x>r.x&&n.y>r.y&&i.x<a.x&&i.y<a.y}},{key:"hasOverlapping",value:function(e){return!this.hasLost(e)&&!this.contains(e)}},{key:"generateRandomLocation",value:function(){var e=Math.random,t=e()*this.width,n=e()*this.height;return new f.default(t,n)}},{key:"toggleCanvasBackground",value:function(e){var t=this._canvas.classList,n="canvas__backdrop";e?t.add(n):t.remove(n)}},{key:"toggleRenderingBounds",value:function(e){this._ignoreBounds=!e}},{key:"applyCustomGlowSettings",value:function(e){var t=this._ensureHashSymbol(e);(0,h.isHexColor)(t)?this._assignCustomGlowSettings(t):this._removeCustomGlowSettings()}},{key:"_ensureHashSymbol",value:function(e){return"#"!==e[0]?"#"+e:e}},{key:"_assignCustomGlowSettings",value:function(e){this._customGlowSettings=Object.assign({},c.default.paintSettings,c.default.colorSettings(e))}},{key:"_removeCustomGlowSettings",value:function(){delete this._customGlowSettings}},{key:"width",get:function(){return this._bounds.max.x-this._bounds.min.x}},{key:"height",get:function(){return this._bounds.max.y-this._bounds.min.y}},{key:"bounds",get:function(){return this._bounds}}]),e}();t.default=_},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return Array.isArray(e)?e:Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(7),u=i(s),c=function(){function e(t){r(this,e),this._ctx=t}return a(e,[{key:"draw",value:function(e,t){var n=t.ignoreBounds,i=t.customGlowSettings;this._ctx.save(),this._strokeAndFill(e,i),n||this._strokeBounds(e),this._ctx.restore()}},{key:"_strokeAndFill",value:function(e,t){this._setup(e,t),this._drawVertices(e),this._fill(),this._stroke()}},{key:"_setup",value:function(e,t){var n=t||u.default.glowCanvasSettings,i=e.inContact?n:e.canvasSettings;Object.assign(this._ctx,i)}},{key:"_drawVertices",value:function(e){var t=this,n=o(e.vertices),i=n[0],r=n.slice(1);this._ctx.beginPath(),this._ctx.moveTo(i.x,i.y),r.forEach(function(e){t._ctx.lineTo(e.x,e.y)}),this._ctx.closePath()}},{key:"_strokeBounds",value:function(e){var t=e.bounds,n=t.min,i=t.max;Object.assign(this._ctx,u.default.boundsCanvasSettings),this._ctx.strokeRect(n.x,n.y,i.x-n.x,i.y-n.y)}},{key:"_fill",value:function(){this._ctx.globalAlpha=this._ctx._fillAlpha,this._ctx.fill()}},{key:"_stroke",value:function(){this._ctx.globalAlpha=this._ctx._strokeAlpha,this._ctx.stroke()}},{key:"switchContext",value:function(e){this._ctx=e}}]),e}();t.default=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(11),a=function(){function e(t,n){i(this,e),this._d=t,this._router=n,this._activatePanelItems()}return o(e,[{key:"_activatePanelItems",value:function(){this._activateButtons(),this._activateCheckboxes(),this._activateTextInputs()}},{key:"_activateButtons",value:function(){var e=this;this.panelItems.buttons.forEach(function(t){var n=t.selector,i=t.message;e._activateButton(n,i)})}},{key:"_activateCheckboxes",value:function(){var e=this;this.panelItems.checkboxes.forEach(function(t){var n=t.selector,i=t.message;e._activateCheckbox(n,i)})}},{key:"_activateTextInputs",value:function(){var e=this;this.panelItems.textInputs.forEach(function(t){var n=t.selector,i=t.message;e._activateTextInput(n,i)})}},{key:"_activateButton",value:function(e,t){var n=this._getElement(e);n.addEventListener("click",this._notifyRouter.bind(this,{message:t}))}},{key:"_activateCheckbox",value:function(e,t){var n=this._getElement(e),i=function(){return n.checked};n.addEventListener("click",this._notifyRouter.bind(this,{message:t,getValue:i}))}},{key:"_activateTextInput",value:function(e,t){var n=this,i=this._getElement(e),o=function(){return i.value};i.addEventListener("keyup",(0,r.debounce)(function(){n._notifyRouter({message:t,getValue:o})},250))}},{key:"_getElement",value:function(e){return this._d.querySelector(e)}},{key:"_notifyRouter",value:function(e){var t=e.message,n=e.getValue,i=void 0;e.getValue&&(0,r.isFunction)(e.getValue)&&(i=n()),this._router.route(t,i)}},{key:"panelItems",get:function(){return{buttons:[{selector:".panel__add-element",message:"addElement"},{selector:".panel__remove-element",message:"removeElement"}],checkboxes:[{selector:"#toggle-backdrop",message:"toggleBackdrop"},{selector:"#toggle-bounding-boxes",message:"toggleBoundingBoxes"}],textInputs:[{selector:"#custom-collision-color",message:"changeCollisionColor"}]}}}]),e}();t.default=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(6),s=(i(a),function(){function e(t){o(this,e),this._engine=t}return r(e,[{key:"route",value:function(e,t){var n=this.routes[e];this._engine[n](t)}},{key:"routes",get:function(){return{addElement:"createElement",removeElement:"destroyElement",toggleBackdrop:"toggleCanvasBackground",toggleBoundingBoxes:"toggleRenderingBounds",changeCollisionColor:"applyCustomGlowSettings"}}}]),e}());t.default=s}]);</script></body></html>