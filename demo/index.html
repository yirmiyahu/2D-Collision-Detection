<!DOCTYPE html><html><head><title>2D Collision Detection</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300"><link rel="icon" type="image/png" href="./favicon.png"><style type="text/css">body,html{font:16px Roboto;height:100%;margin:0;width:100%}.panel{position:fixed;text-align:center;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.panel__button{background-color:#eee;border-radius:.25rem;border:none;font:inherit;margin:2rem 1rem;outline:none;padding:.5rem}.panel__button:active{background-color:#ccc}.canvas__backdrop{background-color:#333}.panel__input-container{display:inline-block;margin:2rem 1rem}.panel__checkbox-label--readable{color:#fff}input[type=checkbox]{display:none}input[type=checkbox]+label:before{background-color:#eee;border-radius:.1rem;border:1px solid #eee;content:"\A0";display:inline-block;height:1rem;margin-right:.5rem;padding:0;vertical-align:top;width:1rem}input[type=checkbox]:checked+label:before{background-color:#eee;color:#333;content:"\2714";text-align:center}.panel__text-input{background-color:#eee;border-radius:.1rem;border:1px solid #eee;font:1rem Roboto;margin-left:.5rem;outline:none;padding:.25rem}#custom-collision-color{width:7rem}</style></head><body><canvas id="canvas"></canvas><div class="panel"><button class="panel__button panel__add-element">Add Element</button> <button class="panel__button panel__remove-element">Remove Element</button><div class="panel__input-container"><input id="toggle-backdrop" type="checkbox" class="panel__checkbox"><label for="toggle-backdrop" class="panel__checkbox-label">Toggle Backdrop</label></div><div class="panel__input-container"><input id="toggle-bounding-boxes" type="checkbox" class="panel__checkbox" checked="checked"><label for="toggle-bounding-boxes" class="panel__checkbox-label">Toggle Bounding Boxes</label></div><div class="panel__input-container"><label for="custom-collision-color" class="panel__text-input-label">Custom Collision Color</label><input id="custom-collision-color" type="text" class="panel__text-input" placeholder="Enter hex code"></div></div><script type="text/javascript">!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),i=t[e[0]];return function(t,e,o){i.apply(this,[t,e,o].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}n(1);var o=n(5),r=i(o);!function(t,e,n){var i=new r.default(t,e,n);i.run()}(window,document,"canvas")},function(t,e){},,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(6),u=i(a),s=n(38),c=i(s),l=n(39),f=i(l),h=n(16),v=function(){function t(e,n,i){o(this,t),this._initializeEngine(e,n,i),this._initializeRouter(),this._initializePanel(n),this._addResizeListener(e)}return r(t,[{key:"_initializeEngine",value:function(t,e,n){this._engine=new u.default(t,e,n)}},{key:"_initializeRouter",value:function(){this._router=new f.default(this._engine)}},{key:"_initializePanel",value:function(t){this._panel=new c.default(t,this._router)}},{key:"_addResizeListener",value:function(t){var e=this;t.addEventListener("resize",(0,h.debounce)(function(){e._engine.resizeView()},250))}},{key:"run",value:function(){this._engine.run()}}]),t}();e.default=v},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(7),u=i(a),s=n(36),c=i(s),l=function(){function t(e,n,i){o(this,t),this._assignContexts(e,n),this._initializeView(i),this._constructElements()}return r(t,[{key:"_assignContexts",value:function(t,e){this._w=t,this._d=e}},{key:"_initializeView",value:function(t){this._view=new c.default(this._w,this._d,t)}},{key:"_constructElements",value:function(){this._elements=[];for(var t=0;t<this.constructor.elementsCount;t++)this.createElement()}},{key:"run",value:function(){this._loop()}},{key:"_loop",value:function(){var t=this;this._w.requestAnimationFrame(function(){t._tick(),t._loop()})}},{key:"_tick",value:function(){var t=this;this._view.clear(),this._checkForCollisions(),this._elements.forEach(function(e,n,i){t._view.render(e),e.move(),t._handlePossibleSuccession(e,n,i)}),this._view.replaceCanvasContext()}},{key:"_checkForCollisions",value:function(){var t=this,e=this._elements,n=function(e){return!t._view.hasLost(e)},i={};e.forEach(function(t,e){var o=t.clones.filter(n).concat(t);i[e]=o,u.default.unflag(o)});for(var o=0;o<e.length-1;o++)for(var r=i[o],a=o+1;a<e.length;a++){var s=i[a];this._collisionBetween(r,s)&&(e[o].inContact||u.default.flag(r),u.default.flag(s))}}},{key:"_collisionBetween",value:function(t,e){var n=this;return t.some(function(t){if(!n._view.hasLost(t))return e.some(function(e){if(!n._view.hasLost(e))return u.default.areTouching(t,e)})})}},{key:"_handlePossibleSuccession",value:function(t,e,n){var i=this;if(t.clones&&t.clones.length>0){var o=function(t){return i._view.hasOverlapping(t)},r=t.clones.find(o);r&&(n[e]=r,u.default.makeTranslatedClones(r,this._view))}}},{key:"resizeView",value:function(){this._view.resizeCanvas(this._w,this._d),this._recalibrateElements()}},{key:"_recalibrateElements",value:function(){var t=this;this._elements.forEach(function(e){u.default.makeTranslatedClones(e,t._view)})}},{key:"createElement",value:function(){var t=u.default.makeRandom(this._view);this._elements.push(t)}},{key:"destroyElement",value:function(){this._elements=this._elements.splice(1)}},{key:"toggleCanvasBackground",value:function(t){this._view.toggleCanvasBackground(t),this._changeLabelColor(t)}},{key:"_changeLabelColor",value:function(t){var e=this._d.querySelectorAll("label");Array.prototype.slice.call(e,0).forEach(function(e){var n=e.classList,i="panel__checkbox-label--readable";t?n.add(i):n.remove(i)})}},{key:"toggleRenderingBounds",value:function(t){this._view.toggleRenderingBounds(t)}},{key:"applyCustomGlowSettings",value:function(t){this._view.applyCustomGlowSettings(t)}}],[{key:"elementsCount",get:function(){return 5}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=n(8),l=i(c),f=n(15),h=i(f),v=n(24),_=i(v),d=n(25),y=i(d),p=n(11),g=i(p),m=n(35),b=i(m),k=function(){function t(e,n){r(this,t),this._vertices=e,this._center=new _.default,this._bounds={},this._edges=[],this._clones=[],this._vertices&&this._vertices.length>2&&this._initializeComponents(),this._setup(n)}return s(t,[{key:"_initializeComponents",value:function(){var t=this;this._vertices.forEach(function(e,n,i){t._computeCenterFrom(e,i),t._computeBoundsFrom(e);var o=(n+1)%i.length;t._buildEdgeFrom(e,i[o])})}},{key:"_computeCenterFrom",value:function(t,e){this._center.add(t);var n=e.length-1;t===e[n]&&this._center.divide(e.length)}},{key:"_computeBoundsFrom",value:function(t){(0,y.default)(this._bounds)?this._initializeBounds(t):(this._bounds.min.min(t),this._bounds.max.max(t))}},{key:"_initializeBounds",value:function(t){this._bounds.min=new _.default(t.x,t.y),this._bounds.max=new _.default(t.x,t.y)}},{key:"_buildEdgeFrom",value:function(t,e){this._edges.push(new h.default(t,e))}},{key:"_setup",value:function(t){if(t){var e=t.inContact,n=o(t,["inContact"]);this._config=n,this.inContact=e||!1}}},{key:"move",value:function(){this.moveComponents(),this._clones.length>0&&this._clones.forEach(function(t){t.moveComponents()})}},{key:"moveComponents",value:function(){var t=this;this._config&&this._config.movementSettings&&!function(){var e=t._config.movementSettings,n=e.velocity,i=e.angle,o=t._config.movementSettings.pivot||t._center,r=[n,i,o];t._clearBounds(),t._center.move.apply(t._center,r),t._edges.forEach(function(e){e.move(r),t._computeBoundsFrom(e.firstPoint)})}()}},{key:"_clearBounds",value:function(){this._bounds={}}},{key:"clearClones",value:function(){this._clones=[]}},{key:"clone",value:function t(e){var n=this._cloneVertices(e),t=new this.constructor(n,this._config);return this._clones.push(t),t}},{key:"_cloneVertices",value:function(t){return this._vertices.map(function(e){var n=e.x,i=e.y,o=new _.default(n,i);return t&&o.add(t),o})}},{key:"intersects",value:function(t){return this._edges.some(function(e){return t.edges.some(function(t){return h.default.intersects(e,t)})})}},{key:"inside",value:function(t){return this._vertices.some(function(e){return e.inside(t)})}},{key:"flag",value:function(){this.inContact=!0}},{key:"unflag",value:function(){this.inContact=!1}},{key:"vertices",get:function(){return this._vertices}},{key:"bounds",get:function(){return this._bounds}},{key:"edges",get:function(){return this._edges}},{key:"clones",get:function(){return this._clones}},{key:"canvasSettings",get:function(){return this._config.canvasSettings}},{key:"movementSettings",get:function(){return this._config?this._config.movementSettings:this.constructor.defaultMovementSettings}}],[{key:"makeRandom",value:function(t){var e=this._generateVertices(t),n=u(this.paintSettings,this.colorSettings()),i=this.randomMovementSettings,o=new this(e,{canvasSettings:n,movementSettings:i});return t&&this.makeTranslatedClones(o,t),o}},{key:"_generateVertices",value:function(t){for(var e=[],n=t?t.generateRandomLocation():new _.default,i=(0,g.default)(75,100),o=(0,g.default)(3,12),r=2*Math.PI/o,a=0;a<o;a++){var u=r*(a+1),s=1.5-Math.random(),c=s*i*Math.cos(u)+n.x,l=s*i*Math.sin(u)+n.y;e.push(new _.default(c,l))}return e}},{key:"colorSettings",value:function(t){var e=t||l.default.generateRandom();return{fillStyle:e,strokeStyle:e}}},{key:"makeTranslatedClones",value:function(t,e){var n=this;this._clearClones(t);var i=e.bounds.max,o=this._computeCloneVectors(t,i);o&&o.forEach(function(e){n._replicate(t,e)})}},{key:"_clearClones",value:function(t){t.clones&&t.clones.length>0&&t.clearClones()}},{key:"_computeCloneVectors",value:function(t,e){if(t.movementSettings){var n=function(){var t=[],n=[-1,0,1];return n.forEach(function(i){n.forEach(function(n){if(0!==i||0!==n){var o=new _.default(e.x*i,e.y*n);t.push(o)}})}),{v:t}}();if("object"===("undefined"==typeof n?"undefined":a(n)))return n.v}}},{key:"_replicate",value:function(t,e){e&&t.clone(e)}},{key:"areTouching",value:function(t,e){return t.intersects(e)||t.inside(e)||e.inside(t)}},{key:"flag",value:function(t){t.forEach(function(t){t.flag()})}},{key:"unflag",value:function(t){t.forEach(function(t){t.unflag()})}},{key:"paintSettings",get:function(){return{_fillAlpha:.5,_strokeAlpha:1,lineWidth:1}}},{key:"boundsCanvasSettings",get:function(){return{strokeStyle:"#666",lineWidth:.5}}},{key:"glowCanvasSettings",get:function(){var t="#e80058";return u(this.paintSettings,this.colorSettings(t))}},{key:"randomMovementSettings",get:function(){var t=function(){return(0,b.default)([-1,1])},e=function(){return t()*Math.random()},n=Math.PI/128,i=4;return{velocity:new _.default(e()*i,e()*i),angle:e()*n}}},{key:"defaultMovementSettings",get:function(){return{velocity:new _.default,angle:0}}}]),t}();e.default=k},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),r=i(o),a=n(11),u=i(a),s={generateRandom:function(){var t=(new r.default).from_hue((0,u.default)(359)).scheme("monochromatic").variation("hard").web_safe(!1),e=t.colors(),n=3;return"#"+e[n]}};e.default=s},function(t,e,n){var i,o;(function(t){(function(){var n,r={}.hasOwnProperty;n=function(){function t(){var e,n;for(e=[],n=1;n<=4;n++)e.push(new t.mutablecolor(60));this.col=e,this._scheme="mono",this._distance=.5,this._web_safe=!1,this._add_complement=!1}var e,n,i,o,a,u;for(n=function(t){return t.split(/\s+/)},t.SCHEMES={},u="mono monochromatic contrast triade tetrade analogic".split(/\s+/),o=0,a=u.length;o<a;o++)i=u[o],t.SCHEMES[i]=!0;return t.PRESETS={default:[-1,-1,1,-.7,.25,1,.5,1],pastel:[.5,-.9,.5,.5,.1,.9,.75,.75],soft:[.3,-.8,.3,.5,.1,.9,.5,.75],light:[.25,1,.5,.75,.1,1,.5,1],hard:[1,-1,1,-.6,.1,1,.6,1],pale:[.1,-.85,.1,.5,.1,1,.1,.75]},t.COLOR_WHEEL={0:[255,0,0,100],15:[255,51,0,100],30:[255,102,0,100],45:[255,128,0,100],60:[255,153,0,100],75:[255,178,0,100],90:[255,204,0,100],105:[255,229,0,100],120:[255,255,0,100],135:[204,255,0,100],150:[153,255,0,100],165:[51,255,0,100],180:[0,204,0,80],195:[0,178,102,70],210:[0,153,153,60],225:[0,102,178,70],240:[0,51,204,80],255:[25,25,178,70],270:[51,0,153,60],285:[64,0,153,60],300:[102,0,153,60],315:[153,0,153,60],330:[204,0,153,80],345:[229,0,102,90]},t.prototype.colors=function(){var t,e,n,i,o,r,a,u,s,c=this;if(r=1,e=this.col[0].get_hue(),t={mono:function(){},contrast:function(){return r=2,c.col[1].set_hue(e),c.col[1].rotate(180)},triade:function(){var t;return r=3,t=60*c._distance,c.col[1].set_hue(e),c.col[1].rotate(180-t),c.col[2].set_hue(e),c.col[2].rotate(180+t)},tetrade:function(){var t;return r=4,t=90*c._distance,c.col[1].set_hue(e),c.col[1].rotate(180),c.col[2].set_hue(e),c.col[2].rotate(180+t),c.col[3].set_hue(e),c.col[3].rotate(t)},analogic:function(){var t;return r=c._add_complement?4:3,t=60*c._distance,c.col[1].set_hue(e),c.col[1].rotate(t),c.col[2].set_hue(e),c.col[2].rotate(360-t),c.col[3].set_hue(e),c.col[3].rotate(180)}},t.monochromatic=t.mono,null==t[this._scheme])throw"Unknown color scheme name: "+this._scheme;for(t[this._scheme](),o=[],n=a=0,s=r-1;0<=s?a<=s:a>=s;n=0<=s?++a:--a)for(i=u=0;u<=3;i=++u)o[4*n+i]=this.col[n].get_hex(this._web_safe,i);return o},t.prototype.colorset=function(){var t,n;for(t=e(this.colors()),n=[];t.length>0;)n.push(t.splice(0,4));return n},t.prototype.from_hue=function(t){if(null==t)throw"variation needs an argument";return this.col[0].set_hue(t),this},t.prototype.from_hex=function(e){var n,i,o,a,u,s,c,l,f,h,v,_,d,y,p,g,m,b,k,x,w;if(null==e)throw"from_hex needs an argument";if(!/^([0-9A-F]{2}){3}$/im.test(e))throw"from_hex("+e+") - argument must be in the form of RRGGBB";m=/(..)(..)(..)/.exec(e).slice(1,4),w=function(){var t,e,n;for(n=[],t=0,e=m.length;t<e;t++)y=m[t],n.push(parseInt(y,16));return n}(),p=w[0],o=w[1],n=w[2],g=function(t,e,n){var i,o,r,a,u,s;return a=Math.min.apply(Math,[t,e,n]),r=Math.max.apply(Math,[t,e,n]),i=r-a,s=r,i>0?(u=i/r,o=t===r?(e-n)/i:e===r?2+(n-t)/i:4+(t-e)/i,o*=60,o%=360,[o,u,s]):[0,0,s]},l=g(function(){var t,e,i,r;for(i=[p,o,n],r=[],t=0,e=i.length;t<e;t++)h=i[t],r.push(h/255);return r}()),u=l[0],s=0,c=1e3,v=null,_=null,a=null,b=null,k=null,x=[];for(h in COLOR_WHEEL)r.call(COLOR_WHEEL,h)&&x.push(h);for(h in x.sort(function(t,e){return t-e}))i=t.COLOR_WHEEL[h],f=g(function(){var t,e,n,o;for(n=i.slice(0,3),o=[],t=0,e=n.length;t<e;t++)h=n[t],o.push(h/255);return o}()),a=f[0],a>=s&&a<=u&&(s=a,v=h),a<=c&&a>=u&&(c=a,_=h);return(0===c||c>360)&&(c=360,_=360),d=c!==s?(u-s)/(c-s):0,a=Math.round(v+d*(_-v)),a%=360,b=l[1],k=l[2],this.from_hue(a),this._set_variant_preset([b,k,b,.7*k,.25*b,1,.5*b,1]),this},t.prototype.add_complement=function(t){if(null==t)throw"add_complement needs an argument";return this._add_complement=t,this},t.prototype.web_safe=function(t){if(null==t)throw"web_safe needs an argument";return this._web_safe=t,this},t.prototype.distance=function(t){if(null==t)throw"distance needs an argument";if(t<0)throw"distance("+t+") - argument must be >= 0";if(t>1)throw"distance("+t+") - argument must be <= 1";return this._distance=t,this},t.prototype.scheme=function(e){if(null==e)throw"scheme needs an argument";if(null==t.SCHEMES[e])throw"'"+e+"' isn't a valid scheme name";return this._scheme=e,this},t.prototype.variation=function(e){if(null==e)throw"variation needs an argument";if(null==t.PRESETS[e])throw"'$v' isn't a valid variation name";return this._set_variant_preset(t.PRESETS[e]),this},t.prototype._set_variant_preset=function(t){var e,n,i;for(i=[],e=n=0;n<=3;e=++n)i.push(this.col[e].set_variant_preset(t));return i},e=function(t){var n,i,o;if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return n="",null!=t.global&&(n+="g"),null!=t.ignoreCase&&(n+="i"),null!=t.multiline&&(n+="m"),null!=t.sticky&&(n+="y"),new RegExp(t.source,n);o=new t.constructor;for(i in t)o[i]=e(t[i]);return o},t.mutablecolor=function(){function e(e){if(null==e)throw"No hue specified";this.saturation=[],this.value=[],this.base_red=0,this.base_green=0,this.base_blue=0,this.base_saturation=0,this.base_value=0,this.set_hue(e),this.set_variant_preset(t.PRESETS.default)}return e.prototype.hue=0,e.prototype.saturation=[],e.prototype.value=[],e.prototype.base_red=0,e.prototype.base_green=0,e.prototype.base_saturation=0,e.prototype.base_value=0,e.prototype.get_hue=function(){return this.hue},e.prototype.set_hue=function(e){var n,i,o,r,a,u,s,c,l,f;n=function(t,e,n){return t+Math.round((e-t)*n)},this.hue=Math.round(e%360),a=this.hue%15+(this.hue-Math.floor(this.hue)),f=a/15,u=this.hue-Math.floor(a),s=(u+15)%360,o=t.COLOR_WHEEL[u],r=t.COLOR_WHEEL[s],c={red:0,green:1,blue:2,value:3};for(i in c)l=c[i],this["base_"+i]=n(o[l],r[l],f);return this.base_saturation=n(100,100,f)/100,this.base_value/=100},e.prototype.rotate=function(t){var e;return e=(this.hue+t)%360,this.set_hue(e)},e.prototype.get_saturation=function(t){var e,n;return n=this.saturation[t],e=n<0?-n*this.base_saturation:n,e>1&&(e=1),e<0&&(e=0),e},e.prototype.get_value=function(t){var e,n;return n=this.value[t],e=n<0?-n*this.base_value:n,e>1&&(e=1),e<0&&(e=0),e},e.prototype.set_variant=function(t,e,n){return this.saturation[t]=e,this.value[t]=n},e.prototype.set_variant_preset=function(t){var e,n,i;for(i=[],e=n=0;n<=3;e=++n)i.push(this.set_variant(e,t[2*e],t[2*e+1]));return i},e.prototype.get_hex=function(t,e){var n,i,o,r,a,u,s,c,l,f,h,v,_,d,y,p,g;for(u=Math.max.apply(Math,function(){var t,e,n,o;for(n=["red","green","blue"],o=[],t=0,e=n.length;t<e;t++)i=n[t],o.push(this["base_"+i]);return o}.call(this)),s=Math.min.apply(Math,function(){var t,e,n,o;for(n=["red","green","blue"],o=[],t=0,e=n.length;t<e;t++)i=n[t],o.push(this["base_"+i]);return o}.call(this)),v=255*(e<0?this.base_value:this.get_value(e)),f=e<0?this.base_saturation:this.get_saturation(e),a=u>0?v/u:0,c=[],g=["red","green","blue"],_=0,y=g.length;_<y;_++)i=g[_],l=Math.min.apply(Math,[255,Math.round(v-(v-this["base_"+i]*a)*f)]),c.push(l);for(t&&(c=function(){var t,e,i;for(i=[],t=0,e=c.length;t<e;t++)n=c[t],i.push(51*Math.round(n/51));return i}()),o="",d=0,p=c.length;d<p;d++)r=c[d],h=r.toString(16),h.length<2&&(h="0"+h),o+=h;return o},e}(),t}(),"undefined"!=typeof t&&null!==t&&null!=t.exports?t.exports=n:(i=[],o=function(){return n}.apply(e,i),!(void 0!==o&&(t.exports=o)))}).call(this)}).call(e,n(10)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){function i(t,e,n){if(n&&"boolean"!=typeof n&&r(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=a(t),void 0===e?(e=t,t=0):e=a(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var l=c();return s(t+l*(e-t+u("1e-"+((l+"").length-1))),e)}return o(t,e)}var o=n(12),r=n(13),a=n(14),u=parseFloat,s=Math.min,c=Math.random;t.exports=i},function(t,e){function n(t,e){return t+i(o()*(e-t+1))}var i=Math.floor,o=Math.random;t.exports=n},function(t,e){function n(){return!1}t.exports=n},function(t,e){function n(t){return t}t.exports=n},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(16),u=function(){function t(e,n){i(this,t),o(this,{firstPoint:e,secondPoint:n})}return r(t,[{key:"move",value:function(t){this.firstPoint.move.apply(this.firstPoint,t)}}],[{key:"intersects",value:function(t,e){var n=this._computeSegment(t),i=this._computeSegment(e),o=this._computeSegment(t,e),r=this._computeDivisor(n,i),u=this._computeDeterminant(n,o,r),s=this._computeDeterminant(i,o,r);return(0,a.inRangeInclusive)(u,0,1)&&(0,a.inRangeInclusive)(s,0,1)}},{key:"_computeSegment",value:function(t,e){return e?{x:t.firstPoint.x-e.firstPoint.x,y:t.firstPoint.y-e.firstPoint.y}:{x:t.secondPoint.x-t.firstPoint.x,y:t.secondPoint.y-t.firstPoint.y}}},{key:"_computeDivisor",value:function(t,e){return t.x*e.y-e.x*t.y}},{key:"_computeDeterminant",value:function(t,e,n){return(t.x*e.y-t.y*e.x)/n}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){var i=arguments,o=this;if((0,s.default)(t)){var r=void 0;return function(){var a=i,u=function(){r=null,n||t.apply(o,a)},s=n&&!r;s?t.apply(o,a):(clearTimeout(r),r=setTimeout(u,e))}}}function r(t,e,n){if((0,l.default)(t)&&(0,l.default)(e)&&(0,l.default)(n)&&n>e)return t>=e&&t<=n}function a(t){if((0,h.default)(t)){var e=/^#(?:[0-9a-fA-F]{3}){1,2}$/i;return e.test(t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.isHexColor=e.inRangeInclusive=e.debounce=void 0;var u=n(17),s=i(u),c=n(20),l=i(c),f=n(22),h=i(f);e.debounce=o,e.inRangeInclusive=r,e.isHexColor=a},function(t,e,n){function i(t){if(!r(t))return!1;var e=o(t);return e==u||e==s||e==a||e==c}var o=n(18),r=n(19),a="[object AsyncFunction]",u="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";t.exports=i},function(t,e){function n(t){return o.call(t)}var i=Object.prototype,o=i.toString;t.exports=n},function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){function i(t){return"number"==typeof t||r(t)&&o(t)==a}var o=n(18),r=n(21),a="[object Number]";t.exports=i},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){function i(t){return"string"==typeof t||!r(t)&&a(t)&&o(t)==u}var o=n(18),r=n(23),a=n(21),u="[object String]";t.exports=i},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(20),u=i(a),s=function(){function t(e,n){o(this,t),this._set(e,n)}return r(t,[{key:"_set",value:function(t,e){return this.x=t||0,this.y=e||0,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"divide",value:function(t){return 0!==t&&(this.x/=t,this.y/=t),this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"move",value:function(t,e,n){this._translate(t),e&&(0,u.default)(e)&&n&&this._rotate(e,n)}},{key:"_translate",value:function(t){this.add(t)}},{key:"_rotate",value:function(t,e){var n=Math.sin(t),i=Math.cos(t),o=this.x-e.x,r=this.y-e.y;this.x=i*o-n*r+e.x,this.y=n*o+i*r+e.y}},{key:"inside",value:function t(e){for(var n=e.vertices,t=!1,i=0,o=n.length-1;i<n.length;o=i++){var r=this._insideCondition(n[i],n[o]);r&&(t=!t)}return t}},{key:"_insideCondition",value:function(t,e){return t.y>this.y!=e.y>this.y&&this.x<(e.x-t.x)*(this.y-t.y)/(e.y-t.y)+t.x}}]),t}();e.default=s},function(t,e,n){function i(t){if(null==t)return!0;if(s(t)&&(u(t)||"string"==typeof t||"function"==typeof t.splice||c(t)||f(t)||a(t)))return!t.length;var e=r(t);if(e==h||e==v)return!t.size;if(l(t))return!o(t).length;for(var n in t)if(d.call(t,n))return!1;return!0}var o=n(26),r=n(28),a=n(29),u=n(23),s=n(30),c=n(32),l=n(33),f=n(34),h="[object Map]",v="[object Set]",_=Object.prototype,d=_.hasOwnProperty;t.exports=i},function(t,e,n){var i=n(27),o=i(Object.keys,Object);t.exports=o},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},18,13,function(t,e,n){function i(t){return null!=t&&r(t.length)&&!o(t)}var o=n(17),r=n(31);t.exports=i},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}var i=9007199254740991;t.exports=n},13,13,13,function(t,e,n){function i(t){var e=t.length;return e?t[o(0,e-1)]:void 0}var o=n(12);t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(37),s=i(u),c=n(7),l=i(c),f=n(24),h=i(f),v=n(16),_=function(){function t(e,n,i){o(this,t),this._initializeCanvases(e,n,i),this._initializePen()}return a(t,[{key:"_initializeCanvases",value:function(t,e,n){this._createCanvas(e,n),this._sizeCanvas(t),this._createOffscreenCanvas(e)}},{key:"_createCanvas",value:function(t,e){this._canvas=t.getElementById(e),this._context=this._canvas.getContext("2d")}},{key:"_sizeCanvas",value:function(t){this._setCanvasSize(t),this._setBounds()}},{key:"resizeCanvas",value:function(t,e){this._sizeCanvas(t),this._createOffscreenCanvas(e),this._pen.switchContext(this._offscreenContext)}},{key:"_setCanvasSize",value:function(t){this._canvas.width=t.innerWidth,this._canvas.height=t.innerHeight}},{key:"_setBounds",value:function(){this._bounds={min:new h.default,max:new h.default(this._canvas.width,this._canvas.height)}}},{key:"_createOffscreenCanvas",value:function(t){var e=this._canvas,n=e.width,i=e.height,o=e.id,r=t.createElement("canvas");r.width=n,r.height=i,r.id=o,this._offscreenCanvas=r,this._offscreenContext=this._offscreenCanvas.getContext("2d")}},{key:"_initializePen",value:function(){this._pen=new s.default(this._offscreenContext)}},{key:"clear",value:function(){this._context.clearRect(0,0,this.width,this.height),this._offscreenContext.clearRect(0,0,this.width,this.height)}},{key:"replaceCanvasContext",value:function(){this._context.drawImage(this._offscreenCanvas,0,0)}},{key:"render",value:function(t){var e=this,n={ignoreBounds:this._ignoreBounds,customGlowSettings:this._customGlowSettings};this._pen.draw(t,n),t.clones.length>0&&t.clones.forEach(function(t){e._pen.draw(t,n)})}},{key:"hasLost",value:function(t){var e=t.bounds,n=e.min,i=e.max,o=this._bounds,r=o.min,a=o.max;return i.x<=r.x||i.y<=r.y||n.x>=a.x||n.y>=a.y}},{key:"contains",value:function(t){var e=t.bounds,n=e.min,i=e.max,o=this._bounds,r=o.min,a=o.max;return n.x>r.x&&n.y>r.y&&i.x<a.x&&i.y<a.y}},{key:"hasOverlapping",value:function(t){return!this.hasLost(t)&&!this.contains(t)}},{key:"generateRandomLocation",value:function(){var t=Math.random,e=t()*this.width,n=t()*this.height;return new h.default(e,n)}},{key:"toggleCanvasBackground",value:function(t){var e=this._canvas.classList,n="canvas__backdrop";t?e.add(n):e.remove(n)}},{key:"toggleRenderingBounds",value:function(t){this._ignoreBounds=!t}},{key:"applyCustomGlowSettings",value:function(t){var e=this._ensureHashSymbol(t);(0,v.isHexColor)(e)?this._assignCustomGlowSettings(e):this._removeCustomGlowSettings()}},{key:"_ensureHashSymbol",value:function(t){return"#"!==t[0]?"#"+t:t}},{key:"_assignCustomGlowSettings",value:function(t){this._customGlowSettings=r({},l.default.paintSettings,l.default.colorSettings(t))}},{key:"_removeCustomGlowSettings",value:function(){delete this._customGlowSettings}},{key:"width",get:function(){return this._bounds.max.x-this._bounds.min.x}},{key:"height",get:function(){return this._bounds.max.y-this._bounds.min.y}},{key:"bounds",get:function(){return this._bounds}}]),t}();e.default=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return Array.isArray(t)?t:Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(7),c=i(s),l=function(){function t(e){r(this,t),this._ctx=e}return u(t,[{key:"draw",value:function(t,e){var n=e.ignoreBounds,i=e.customGlowSettings;this._ctx.save(),this._strokeAndFill(t,i),n||this._strokeBounds(t),this._ctx.restore()}},{key:"_strokeAndFill",value:function(t,e){this._setup(t,e),this._drawVertices(t),this._fill(),this._stroke()}},{key:"_setup",value:function(t,e){var n=e||c.default.glowCanvasSettings,i=t.inContact?n:t.canvasSettings;a(this._ctx,i)}},{key:"_drawVertices",value:function(t){var e=this,n=o(t.vertices),i=n[0],r=n.slice(1);this._ctx.beginPath(),this._ctx.moveTo(i.x,i.y),r.forEach(function(t){e._ctx.lineTo(t.x,t.y)}),this._ctx.closePath()}},{key:"_strokeBounds",value:function(t){var e=t.bounds,n=e.min,i=e.max;a(this._ctx,c.default.boundsCanvasSettings),this._ctx.strokeRect(n.x,n.y,i.x-n.x,i.y-n.y)}},{key:"_fill",value:function(){this._ctx.globalAlpha=this._ctx._fillAlpha,this._ctx.fill()}},{key:"_stroke",value:function(){this._ctx.globalAlpha=this._ctx._strokeAlpha,this._ctx.stroke()}},{key:"switchContext",value:function(t){this._ctx=t}}]),t}();e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(17),u=i(a),s=n(16),c=function(){function t(e,n){o(this,t),this._d=e,this._router=n,this._activatePanelItems()}return r(t,[{key:"_activatePanelItems",value:function(){this._activateButtons(),this._activateCheckboxes(),this._activateTextInputs()}},{key:"_activateButtons",value:function(){var t=this;this.panelItems.buttons.forEach(function(e){var n=e.selector,i=e.message;t._activateButton(n,i)})}},{key:"_activateCheckboxes",value:function(){var t=this;this.panelItems.checkboxes.forEach(function(e){var n=e.selector,i=e.message;t._activateCheckbox(n,i)})}},{key:"_activateTextInputs",value:function(){var t=this;this.panelItems.textInputs.forEach(function(e){var n=e.selector,i=e.message;t._activateTextInput(n,i)})}},{key:"_activateButton",value:function(t,e){var n=this._getElement(t);n.addEventListener("click",this._notifyRouter.bind(this,{message:e}))}},{key:"_activateCheckbox",value:function(t,e){var n=this._getElement(t),i=function(){return n.checked};n.addEventListener("click",this._notifyRouter.bind(this,{message:e,getValue:i}))}},{key:"_activateTextInput",value:function(t,e){var n=this,i=this._getElement(t),o=function(){return i.value};i.addEventListener("keyup",(0,s.debounce)(function(){n._notifyRouter({message:e,getValue:o})},250))}},{key:"_getElement",value:function(t){return this._d.querySelector(t)}},{key:"_notifyRouter",value:function(t){var e=t.message,n=t.getValue,i=void 0;t.getValue&&(0,u.default)(t.getValue)&&(i=n()),this._router.route(e,i)}},{key:"panelItems",get:function(){return{buttons:[{selector:".panel__add-element",message:"addElement"},{selector:".panel__remove-element",message:"removeElement"}],checkboxes:[{selector:"#toggle-backdrop",message:"toggleBackdrop"},{selector:"#toggle-bounding-boxes",message:"toggleBoundingBoxes"}],textInputs:[{selector:"#custom-collision-color",message:"changeCollisionColor"
}]}}}]),t}();e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(6),u=(i(a),function(){function t(e){o(this,t),this._engine=e}return r(t,[{key:"route",value:function(t,e){var n=this.routes[t];this._engine[n](e)}},{key:"routes",get:function(){return{addElement:"createElement",removeElement:"destroyElement",toggleBackdrop:"toggleCanvasBackground",toggleBoundingBoxes:"toggleRenderingBounds",changeCollisionColor:"applyCustomGlowSettings"}}}]),t}());e.default=u}]));</script></body></html>